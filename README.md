<ìœ„í—˜ìì‚°ì„ ì´ìš©í•œ ìµœì†Œë¶„ì‚°í¬íŠ¸í´ë¦¬ì˜¤ ë„ì¶œ>
=============
í•™ê³¼ | í•™ë²ˆ | ì„±ëª…
---- | ---- | ---- 
ê²½ì˜í•™ê³¼ | 201743143 | ê¹€ìˆ˜ë¯¼

## ğŸ›  í”„ë¡œì íŠ¸ ëª©ì  ë° ë™ê¸°
'ê³„ë€ì„ í•œ ë°”êµ¬ë‹ˆì— ë‹´ì§€ ë§ë¼.' íˆ¬ìë¥¼ ì‹œì‘í•œë‹¤ë©´ ë“£ê²Œ ë˜ëŠ” íˆ¬ì ê²©ì–¸ì…ë‹ˆë‹¤. ê³„ë€ì„ í•œ ë°”êµ¬ë‹ˆì— ë‹´ìœ¼ë©´ ì‰½ê²Œ ê¹¨ì§€ë“¯ì´,í•˜ë‚˜ì˜ ìì‚°ì— ì˜¬ì¸í•˜ê¸°ë³´ë‹¤ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ í†µí•œ ë¶„ì‚°íˆ¬ìë¡œ ìœ„í—˜ì„ ìµœì†Œí™”í•˜ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ê°œê°œì¸ì€ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì„±í•œ í›„, ê°œë³„ ìì‚°ì˜ íˆ¬ìë¹„ì¤‘ì„ ì–´ë–»ê²Œ ì„¤ì •í•´ì•¼ ê°€ì¥ íš¨ìœ¨ì ì´ê³  ìµœì í™”ëœ íˆ¬ìë¥¼ í•  ìˆ˜ ìˆì„ê¹Œìš”?  2ê°œì˜ ìì‚°ìœ¼ë¡œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì„±í•œë‹¤ë©´ ê°ê°ì˜ íˆ¬ìë¹„ì¤‘ì„ êµ¬í•˜ê¸° ì‰¬ìš¸ ê²ƒì…ë‹ˆë‹¤. A,B ìì‚°ìœ¼ë¡œ êµ¬ì„±í–ˆì„ ë•Œ,A ê¸°ì—…ì´ ê²½ì˜ë‚œì„ ê²ªê³  ìˆë‹¤ê³  ê°€ì •í•œë‹¤ë©´ A 10%, B 90%ë¡œ íˆ¬ìë¹„ì¤‘ì„ ì •í•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„± ìì‚° ìˆ˜ê°€ 5ê°œ, 10ê°œ, ê·¸ë¦¬ê³  150ê°œê°€ ë  ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ íˆ¬ìë¹„ì¤‘ì„ ë°°ë¶„í•˜ë‚˜ìš”? ê°ê³¼ ì´‰ìœ¼ë¡œë§Œìœ¼ë¡œëŠ” ê°œê°œì¸ì´ í¬ë§ìˆ˜ìµë¥ ì— ë”°ë¥¸ ê°€ì¥ íš¨ìœ¨ì ì¸ ìì‚° íˆ¬ìë¹„ì¤‘ì„ ì•Œì•„ë‚´ê¸° ì–´ë µìŠµë‹ˆë‹¤. ë˜í•œ ì„ì˜ë¡œ íˆ¬ìë¹„ì¤‘ì„ ì •í•œë‹¤ë©´ ì´ì— ë”°ë¥¸ ì˜ˆìƒìˆ˜ìµì„ ì˜ˆì¸¡í•˜ê¸°ë„ í˜ë“­ë‹ˆë‹¤.   

ë”°ë¼ì„œ ì €ëŠ” fnguide ì—ì„œ ì œê³µí•˜ëŠ” ìˆ˜ì •ì£¼ê°€ ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™” ìì‚°ë°°ë¶„ ë¹„ìœ¨(íˆ¬ìë¹„ì¤‘)ì„ êµ¬í•˜ëŠ” ê³¼ì • ì¤‘
ìµœì†Œë¶„ì‚°í¬íŠ¸í´ë¦¬ì˜¤(ìœ„í—˜ì´ ìµœì†Œê°€ ë˜ëŠ” íˆ¬ìë¹„ì¤‘)ë¥¼ ë„ì¶œí•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.
ê°œì¸ì´ ì„ íƒí•œ í¬íŠ¸í´ë¦¬ì˜¤ì— ë”°ë¼ ê°€ì¥ ìœ„í—˜ì´ ìµœì†Œê°€ ë˜ëŠ” íˆ¬ìë¹„ì¤‘ì„ êµ¬í•˜ê³ , ê·¸ ë¹„ì¤‘ì— ë”°ë¥¸ ìˆ˜ìµê³¼ ìœ„í—˜ì„ êµ¬í•  ê²ƒì…ë‹ˆë‹¤.
ì°¨ì…,ëŒ€ì¶œì´ ê°€ëŠ¥í•œ ë¬´ìœ„í—˜ìì‚°ì€ ì œì™¸í•˜ê³  ìœ„í—˜ìì‚°ë§Œ ê³ ë ¤í•  ì˜ˆì •ì…ë‹ˆë‹¤.

## ğŸ›  í”„ë¡œì íŠ¸ ê°œìš”
![ê¸°ë§ë³´ê³ ì„œ íë¦„ë„íŒŒì¼](https://github.com/09superm/python_project_2019/blob/master/íë¦„ë„1.jpeg)
![ê¸°ë§ë³´ê³ ì„œ íë¦„ë„íŒŒì¼](https://github.com/09superm/python_project_2019/blob/master/íë¦„ë„2.jpeg)



## ğŸ“Š ì‚¬ìš©í•œ ê³µê³µë°ì´í„°
* fnguide ìˆ˜ì •ì£¼ê°€ ìˆ˜ìµë¥  ë°ì´í„°

    [ë°ì´í„°ë³´ê¸°](https://github.com/09superm/python_project_2019/blob/master/returndata.csv)
    (ì„ íƒ ê°€ëŠ¥í•œ ìì‚°ì€ KOSPI 200 ì¤‘ 2000 ë…„ ì´í›„ ëª¨ë“  ê°€ê²©ì •ë³´ë¥¼ ê°–ëŠ” ìì‚°ìœ¼ë¡œ í•œì •, 20ê°œ ì£¼ì‹ì¢…ëª©)



## ğŸ›  ì†ŒìŠ¤
1. ë°ì´í„° íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ~ ìµœì í™”í•¨ìˆ˜ ì¸í’‹ ìš”ì†Œ ë§Œë“¤ê¸°
* [ë§í¬ë¡œ ì†ŒìŠ¤ ë‚´ìš© ë³´ê¸°](https://github.com/09superm/python_project_2019/blob/master/1.py) 

2. ìµœì†Œë¶„ì‚°í¬íŠ¸í´ë¦¬ì˜¤ êµ¬í•˜ê¸° 
* [ë§í¬ë¡œ ì†ŒìŠ¤ ë‚´ìš© ë³´ê¸°](https://github.com/09superm/python_project_2019/blob/master/2.py) 

3. ê·¸ë˜í”„ ê·¸ë¦¬ê¸° 
* [ë§í¬ë¡œ ì†ŒìŠ¤ ë‚´ìš© ë³´ê¸°](https://github.com/09superm/python_project_2019/blob/master/3.py) 

* ì½”ë“œ ì‚½ì…
~~~python
import pandas as pd
import numpy as np

# ìˆ˜ìµë¥  ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°, returnD ìˆ˜ìµë¥  ì •ë³´ ì €ì¥
returnD = pd.read_csv("returndata.csv")

# stock list ì•ˆë‚´í•˜ê¸°
print("____________ + Stock List + ____________\n\n"
      "[1] SKí…”ë ˆì½¤, SKí•˜ì´ë‹‰ìŠ¤, S-Oil, ê³ ë ¤ì•„ì—°, ê¸°ì•„ì°¨\n"
      "[2] ë†ì‹¬, ëŒ€í•œí•­ê³µ, ë¡¯ë°ì¼€ë¯¸ì¹¼, ì‚¼ì„±ì „ì, LG\n"
      "[3] ì˜¤ëšœê¸°, POSCO, í•œêµ­ì „ë ¥, í•œì˜¨ì‹œìŠ¤í…œ, í˜„ëŒ€ëª¨ë¹„ìŠ¤\n"
      "[4] í˜„ëŒ€ê±´ì„¤, í˜„ëŒ€ì°¨, í˜„ëŒ€ì œì² , í˜„ëŒ€ì¤‘ê³µì—…, í˜¸í…”ì‹ ë¼\n")

# í¬íŠ¸í´ë¦¬ì˜¤ ì…ë ¥ ë°›ê¸°, your_input ì…ë ¥ê°’ ì €ì¥
S1, S2, S3, S4, S5 = input("ë‹¤ìŒ 20ê°œì˜ ì¢…ëª© ì¤‘ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì„±í•  ì¢…ëª© 5ê°œë¥¼ ì…ë ¥í•˜ì„¸ìš”.(êµ¬ë¶„ì€ ì½¤ë§ˆ)").split(",")
your_input = [S1, S2, S3, S4, S5]

# ì…ë ¥ê°’ì— ë”°ë¥¸ ì—´ì˜ ì´ë¦„ ë¶ˆëŸ¬ì˜¤ê¸°, your_data ì…ë ¥ê°’ì— ë”°ë¥¸ ì—´ì´ë¦„ ì €ì¥
your_data = []
stockDic = {"SKí…”ë ˆì½¤":"A017670", "Skí•˜ì´ë‹‰ìŠ¤":"A000660", "S-Oil":"A010950", "ê³ ë ¤ì•„ì—°":"A010130", "ê¸°ì•„ì°¨":"A000270",
            "ë†ì‹¬":"A004370", "ëŒ€í•œí•­ê³µ":"A003490", "ë¡¯ë°ì¼€ë¯¸ì¹¼":"A011170", "ì‚¼ì„±ì „ì":"A005930", "LG":"A003550",
            "ì˜¤ëšœê¸°":"A007310", "POSCO":"A005490","í•œêµ­ì „ë ¥":"A015760", "í•œì˜¨ì‹œìŠ¤í…œ":"A018880", "í˜„ëŒ€ëª¨ë¹„ìŠ¤":"A012330",
            "í˜„ëŒ€ê±´ì„¤":"A000720", "í˜„ëŒ€ì°¨":"A005380", "í˜„ëŒ€ì œì² ":"A004020","í˜„ëŒ€ì¤‘ê³µì—…":"A009540", "í˜¸í…”ì‹ ë¼":"A008770"}

for s in your_input :
    if s in stockDic.keys() :
        s = stockDic[s]
        your_data.append(s)
    else:
        print("ì˜¬ë°”ë¥¸ ì¢…ëª© ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.")
        break


# ì…ë ¥ê°’ì— ë”°ë¥¸ ìˆ˜ìµë¥  ì •ë³´ ì €ì¥í•˜ê¸°, return_data ì…ë ¥ê°’ ì—´ì´ë¦„ì— ë”°ë¼ ìˆ˜ìµë¥  ì •ë³´ ì €ì¥
return_data = returnD.loc[5:237,your_data]
# print(return_data)

# pandas ë°ì´í„°ë¥¼ numpy ë°ì´í„°ë¡œ ë³€í™˜í•˜ê¸° return_data_np
return_data_np = return_data.values
return_data_np = return_data_np.astype("float64") # ë°ì´í„° íƒ€ì…ì€ ì‹¤ìˆ˜ë¡œ í•¨
# print(return_data_np)
# print("-----------------------")

# ê° ì¢…ëª©ì˜ í‰ê· , ë¶„ì‚°, í‘œì¤€í¸ì°¨ ret, var, std
rt_ret = return_data_np.sum(axis=0)/ 233
rt_var = return_data_np.var(axis=0)
rt_std = return_data_np.std(axis=0)

# ê° ì¢…ëª©ì˜ ê³µë¶„ì‚° covmat
covmat = np.cov(return_data_np, rowvar=0)

# GMVP

def MinVol_objective(x): # ëª©ì í•¨ìˆ˜
    variance = x.T @ covmat @ x # í¬íŠ¸í´ë¦¬ì˜¤ì˜ ìœ„í—˜ = ë¹„ì¤‘ * ê³µë¶„ì‚° * ë¹„ì¤‘
    standard_deviation = variance ** 0.5  # stdëŠ” varianceì˜ ë£¨íŠ¸ê°’
    return (standard_deviation)

def weight_sum_constraint(x): # ì œì•½í•¨ìˆ˜ xê°’ì˜ í•©ì´ 1
    return (x.sum() - 1.0)

def MinVol(covmat, lb, ub): # ìµœì í™” êµ¬í•˜ëŠ” í•¨ìˆ˜ ì¸í’‹ ê°’ì€ covmat(ê³µë¶„ì‚° ë§¤íŠ¸ë¦­ìŠ¤),lb(ìµœì†Œë¹„ì¤‘), ub(ìµœëŒ€ë¹„ì¤‘)
    x0 = np.repeat(1 / covmat.shape[1], covmat.shape[1]) # ë™ì¼ ë¹„ì¤‘ë§Œí¼ ì¤Œ
    lbound = np.repeat(lb, covmat.shape[1]) # ìµœì†Œë¹„ì¤‘
    ubound = np.repeat(ub, covmat.shape[1]) # ìµœëŒ€ë¹„ì¤‘
    bnds = tuple(zip(lbound, ubound)) # ìµœì†Œë¹„ì¤‘ê³¼ ìµœëŒ€ë¹„ì¤‘ì˜ ì§ì„ ë§Œë“¤ì–´ì¤Œ

    constraints = ({"type": "eq", "fun": weight_sum_constraint}) # ì œì•½ì¡°ê±´

    result = minimize(fun=MinVol_objective,
                      x0=x0,
                      method="SLSQP",
                      constraints=constraints,
                      bounds=bnds)
    return (result.x)

gmvpwgt = MinVol(covmat,0,1)
# print("gmvp_wgt:",gmvpwgt)

gmvpret = "%0.6f" % rt_ret.dot(gmvpwgt)
gmvpvar = gmvpwgt.dot(gmvpwgt.dot(covmat))
gmvpstd = "%0.6f" % math.sqrt(gmvpvar)

# print("gmvp_ret:",gmvpret)
# print("gmvp_std:",gmvpstd)

print("\n===== ê²°ê³¼ =====\n")
print(str(your_input) + "ë¡œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ êµ¬ì„±í–ˆì„ ë•Œ,\n",
      your_input[0], gmvpwgt[0:1], your_input[1], gmvpwgt[1:2], your_input[2], gmvpwgt[2:3], your_input[3], gmvpwgt[3:4],your_input[4],str(gmvpwgt[4:5])
      + "ë§Œí¼ íˆ¬ìí•˜ë©´ ìœ„í—˜ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n", "ì´ ë•Œ ë°œìƒë˜ëŠ” ìœ„í—˜ì€",gmvpstd, "ìˆ˜ìµë¥ ì˜ í‰ê· ì€", str(gmvpret), "ì…ë‹ˆë‹¤.")

# ê·¸ë˜í”„ ë§Œë“¤ê¸°
font_name = font_manager.FontProperties(fname="/System/Library/Fonts/AppleSDGothicNeo.ttc").get_name()
rc('font', family=font_name)
style.use('ggplot')

colors = ['gold', 'yellowgreen', 'lightcoral', 'lightskyblue', 'red']
labels = your_input
ratio = gmvpwgt
explode = (0.1, 0.1, 0.1, 0.1, 0.1)

plt.title("Global Minimum Volatility Portfolio\n")
plt.pie(ratio, explode=explode, labels=labels, colors=colors, autopct='%1.1f%%', shadow=True, startangle=90)
plt.show()
~~~
